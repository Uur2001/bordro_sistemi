{% extends 'base.html' %}
{% load static %}

{% block title %}Aylık Bordro Hesaplama{% endblock %}

{% block content %}
<div class="calculation-page">
    <!-- Üst Navbar - Adımlar -->
    <div class="steps-navbar">
        <div class="navbar-container">
            <button class="nav-step active" onclick="showStep(1)" data-step="1">Temel Ücret</button>
            <button class="nav-step" onclick="showStep(2)" data-step="2">Çalışma Bilgileri</button>
            <button class="nav-step" onclick="showStep(3)" data-step="3">Sosyal Güvenlik</button>
            <button class="nav-step" onclick="showStep(4)" data-step="4">Özel Sigortalar</button>
            <button class="nav-step" onclick="showStep(5)" data-step="5">Fazla Mesailer</button>
        </div>
    </div>

    <div class="calculation-container-new">
        <!-- Sağ Taraf - Form -->
        <div class="form-content">
            <!-- ADIM 1: TEMEL ÜCRET -->
            <div class="step-content active" id="step1">
                <div class="form-header-bar">
                    <h2>Temel Ücret</h2>
                    <div class="header-right">
                        <select class="header-select">
                            <option>-</option>
                        </select>
                        <div class="action-buttons">
                            <button class="icon-btn green" title="Yeni"><i class="fas fa-plus"></i></button>
                            <button class="icon-btn blue" title="Kaydet"><i class="fas fa-save"></i></button>
                            <button class="icon-btn yellow" title="Düzenle"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn red" title="Sil"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <form class="modern-form">
                    <div class="form-section-content">
                        <!-- Grup 1: Bordro Dönemi ve Aylık Temel Ücret -->
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Bordro Dönemi</label>
                                <div class="inline-inputs">
                                    <select class="form-control">
                                        <option selected>Şubat</option>
                                        <option>Ocak</option>
                                        <option>Mart</option>
                                        <option>Nisan</option>
                                        <option>Mayıs</option>
                                        <option>Haziran</option>
                                        <option>Temmuz</option>
                                        <option>Ağustos</option>
                                        <option>Eylül</option>
                                        <option>Ekim</option>
                                        <option>Kasım</option>
                                        <option>Aralık</option>
                                    </select>
                                    <select class="form-control">
                                        <option selected>2026</option>
                                        <option>2025</option>
                                        <option>2024</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Aylık Temel Ücret</label>
                                <div class="inline-inputs">
                                    <input type="text" class="form-control" value="33.030,00 ₺">
                                    <select class="form-control">
                                        <option selected>Brüt</option>
                                        <option>Net</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Grup 2: Vergiler -->
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Gelir Vergisi</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-text">Hesaplansın</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Damga Vergisi</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-text">Hesaplansın</span>
                                </label>
                            </div>
                        </div>

                        <!-- Grup 3: Engellilik ve Matrahlar -->
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Engellilik Durumu</label>
                                <select class="form-control">
                                    <option selected>Normal</option>
                                    <option>1. Derece</option>
                                    <option>2. Derece</option>
                                    <option>3. Derece</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Yıllık GV Matrahı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Yıllık Asg. Ücret GV Matrahı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-calculate">
                                <i class="fas fa-calculator"></i> Bordro Hesapla
                            </button>
                            <button type="button" class="btn-next" onclick="showStep(2)">
                                Sonraki Adım <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- ADIM 2: ÇALIŞMA BİLGİLERİ -->
            <div class="step-content" id="step2">
                <div class="form-header-bar">
                    <h2>Çalışma Bilgileri</h2>
                    <div class="header-right">
                        <select class="header-select">
                            <option>-</option>
                        </select>
                        <div class="action-buttons">
                            <button class="icon-btn green"><i class="fas fa-plus"></i></button>
                            <button class="icon-btn blue"><i class="fas fa-save"></i></button>
                            <button class="icon-btn yellow"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn red"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <form class="modern-form">
                    <div class="form-section-content">
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Bu Ay'daki Gün Sayısı</label>
                                <select class="form-control">
                                    <option>Takvim Günü</option>
                                    <option>30 Gün</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Günlük Temel Ücret</label>
                                <span class="value-display">1.179,64 ₺</span>
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Çalışılan Gün</label>
                                <input type="text" class="form-control" value="28 gün">
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Çalışılan Ücret</label>
                                <span class="value-display">33.030,00 ₺</span>
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Eksik Saat</label>
                                <input type="text" class="form-control" value="0,00 saat">
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label class="text-black">Eksik Saat Ücreti</label>
                                <span class="value-display">0,00 ₺</span>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Aylık Temel Ücret</label>
                                <span class="value-display">33.030,00 ₺</span>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-prev" onclick="showStep(1)">
                                <i class="fas fa-arrow-left"></i> Önceki Adım
                            </button>
                            <button type="button" class="btn-calculate">
                                <i class="fas fa-calculator"></i> Bordro Hesapla
                            </button>
                            <button type="button" class="btn-next" onclick="showStep(3)">
                                Sonraki Adım <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- ADIM 3: SOSYAL GÜVENLİK -->
            <div class="step-content" id="step3">
                <div class="form-header-bar">
                    <h2>Sosyal Güvenlik</h2>
                    <div class="header-right">
                        <select class="header-select">
                            <option>-</option>
                        </select>
                        <div class="action-buttons">
                            <button class="icon-btn green"><i class="fas fa-plus"></i></button>
                            <button class="icon-btn blue"><i class="fas fa-save"></i></button>
                            <button class="icon-btn yellow"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn red"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <form class="modern-form">
                    <div class="form-section-content">
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>SGK Tipi</label>
                                <select class="form-control">
                                    <option selected>01-Hizmet Akdi ile Tüm Sigorta Kollarına Tabi Çalışanlar</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Kanun No</label>
                                <select class="form-control">
                                    <option selected>00000-Kanun Numarasız</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Hazine Yardımı</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-text">Hesaplansın</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>B.E.S.</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-text">Hesaplansın</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Devir Matrah (2 önceki ay)</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Devir Matrah (1 önceki ay)</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-prev" onclick="showStep(2)">
                                <i class="fas fa-arrow-left"></i> Önceki Adım
                            </button>
                            <button type="button" class="btn-calculate">
                                <i class="fas fa-calculator"></i> Bordro Hesapla
                            </button>
                            <button type="button" class="btn-next" onclick="showStep(4)">
                                Sonraki Adım <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- ADIM 4: ÖZEL SİGORTALAR -->
            <div class="step-content" id="step4">
                <div class="form-header-bar">
                    <h2>Özel Sigortalar</h2>
                    <div class="header-right">
                        <select class="header-select">
                            <option>-</option>
                        </select>
                        <div class="action-buttons">
                            <button class="icon-btn green"><i class="fas fa-plus"></i></button>
                            <button class="icon-btn blue"><i class="fas fa-save"></i></button>
                            <button class="icon-btn yellow"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn red"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <form class="modern-form">
                    <div class="form-section-content">
                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Sağ. Sig. İşçi Payı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Sağ. Sig. İşv. Payı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-row-inline">
                            <div class="form-group inline">
                                <label>Hayat Sig. İşçi Payı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-row-inline separator">
                            <div class="form-group inline">
                                <label>Hayat Sig. İşv. Payı</label>
                                <input type="text" class="form-control" value="0,00 ₺">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-prev" onclick="showStep(3)">
                                <i class="fas fa-arrow-left"></i> Önceki Adım
                            </button>
                            <button type="button" class="btn-calculate">
                                <i class="fas fa-calculator"></i> Bordro Hesapla
                            </button>
                            <button type="button" class="btn-next" onclick="showStep(5)">
                                Sonraki Adım <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- ADIM 5: FAZLA MESAİLER -->
            <div class="step-content" id="step5">
                <div class="form-header-bar">
                    <h2>Fazla Mesailer</h2>
                    <div class="header-right">
                        <select class="header-select">
                            <option>-</option>
                        </select>
                        <div class="action-buttons">
                            <button class="icon-btn green"><i class="fas fa-plus"></i></button>
                            <button class="icon-btn blue"><i class="fas fa-save"></i></button>
                            <button class="icon-btn yellow"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn red"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>

                <form class="modern-form">
                    <div class="form-section-content">
                        <div class="form-row-triple">
                            <div class="form-group triple">
                                <label>FM01 (50,00 %)</label>
                                <input type="text" class="form-control" value="0,00 saat" placeholder="Saat">
                                <span class="value-display">0,00 ₺</span>
                            </div>
                        </div>

                        <div class="form-row-triple">
                            <div class="form-group triple">
                                <label>FM02 (100,00 %)</label>
                                <input type="text" class="form-control" value="0,00 saat" placeholder="Saat">
                                <span class="value-display">0,00 ₺</span>
                            </div>
                        </div>

                        <div class="form-row-triple">
                            <div class="form-group triple">
                                <label>FM03 (200,00 %)</label>
                                <input type="text" class="form-control" value="0,00 saat" placeholder="Saat">
                                <span class="value-display">0,00 ₺</span>
                            </div>
                        </div>

                        <div class="total-box">
                            <span class="total-label">TOPLAM</span>
                            <span class="total-value">0,00 ₺</span>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-prev" onclick="showStep(4)">
                                <i class="fas fa-arrow-left"></i> Önceki Adım
                            </button>
                            <button type="button" class="btn-calculate">
                                <i class="fas fa-calculator"></i> Bordro Hesapla
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function showStep(stepNumber) {
    // Tüm adımları gizle
    document.querySelectorAll('.step-content').forEach(step => {
        step.classList.remove('active');
    });

    // Tüm navbar butonları pasif yap
    document.querySelectorAll('.nav-step').forEach(btn => {
        btn.classList.remove('active');
    });

    // Seçili adımı göster
    document.getElementById('step' + stepNumber).classList.add('active');
    document.querySelector('.nav-step[data-step="' + stepNumber + '"]').classList.add('active');

    // Yukarı kaydır
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
{% endblock %}